INFO - 2026-02-23 01:28:13,557 - root - main - Starting VirusScanner Consumer with Metrics/Health on port 9090
INFO - 2026-02-23 01:28:13,558 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Starting Virus Scanner Consumer (Backend: RedisQueueProvider, Queues: ['scan_priority', 'scan_normal'])
/mnt/c/workspace/vibecoding-platform/app/ncs/virusscanner/image/src/aether_platform/virusscan/consumer/infrastructure/coordinator.py:121: RuntimeWarning: coroutine 'RedisStateStoreProvider.set' was never awaited
  self.state_store.set(heartbeat_key, f"{now}|{self.current_epoch}", ex=60)
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
/mnt/c/workspace/vibecoding-platform/app/ncs/virusscanner/image/src/aether_platform/virusscan/consumer/infrastructure/coordinator.py:122: RuntimeWarning: coroutine 'RedisStateStoreProvider.sadd' was never awaited
  self.state_store.sadd("clamav:active_nodes", self.pod_name)
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
ERROR - 2026-02-23 01:28:13,888 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Coordination loop error: 'coroutine' object is not subscriptable
/mnt/c/workspace/vibecoding-platform/app/ncs/virusscanner/image/src/aether_platform/virusscan/consumer/interfaces/worker/handler.py:123: RuntimeWarning: coroutine 'RedisStateStoreProvider.mget' was never awaited
  self.logger.error(f"Coordination loop error: {e}")
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
INFO - 2026-02-23 01:28:13,901 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-0] started. Primary=scan_priority, Secondary=scan_normal
INFO - 2026-02-23 01:28:13,902 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-1] started. Primary=scan_priority, Secondary=scan_normal
INFO - 2026-02-23 01:28:13,902 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-2] started. Primary=scan_priority, Secondary=scan_normal
INFO - 2026-02-23 01:28:13,902 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-3] started. Primary=scan_priority, Secondary=scan_normal
INFO - 2026-02-23 01:28:13,902 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [Low-Staff-0] started. Primary=scan_normal, Secondary=None
ERROR - 2026-02-23 01:28:45,378 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Coordination loop error: 'coroutine' object is not subscriptable
ERROR - 2026-02-23 01:29:16,838 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Coordination loop error: 'coroutine' object is not subscriptable
INFO - 2026-02-23 01:29:37,620 - root - main - Graceful shutdown signal received...
INFO - 2026-02-23 01:29:37,620 - root - main - Graceful shutdown signal received...
INFO - 2026-02-23 01:29:37,801 - root - main - Graceful shutdown signal received...
INFO - 2026-02-23 01:29:37,801 - root - main - Graceful shutdown signal received...
INFO - 2026-02-23 01:29:38,117 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [Low-Staff-0] shutting down gracefully...
INFO - 2026-02-23 01:29:38,118 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-1] shutting down gracefully...
INFO - 2026-02-23 01:29:38,118 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-3] shutting down gracefully...
INFO - 2026-02-23 01:29:38,118 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-0] shutting down gracefully...
INFO - 2026-02-23 01:29:38,118 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Worker [High-Staff-2] shutting down gracefully...
INFO - 2026-02-23 01:29:48,329 - aether_platform.virusscan.consumer.interfaces.worker.handler - handler - Coordination loop shutting down gracefully...
